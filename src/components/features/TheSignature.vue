<script lang="ts" setup>
  import { ref, watchEffect } from 'vue'
  import { useElementVisibility } from '@vueuse/core'

  const target = ref(null)
  const signatureIsVisible = useElementVisibility(target)
 
  watchEffect(() => {
    if (signatureIsVisible.value) {
      drawLetter()
    } 
  })

  /**
   * Draw the letter by updating the strokeDasharray.
   */
  function drawLetter() {
    const masks = ['L', 'A', 'U', 'R', 'AA']

    masks.forEach((mask: string) => {
      const id = `#mask-${mask}`
      const path: SVGPathElement | null = document.querySelector<SVGPathElement>(id)
      const length: number | undefined = path?.getTotalLength()
      if (path && length !== undefined) {
        path.style.strokeDasharray = length.toString()
        path.style.strokeDashoffset = length.toString()
      }
    })
  }
</script>

<template>
  <svg
    ref="target"
    version="1.1"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    x="0px"
    y="0px"
    viewBox="0 0 233.58 136.53"
    style="enable-background: new 0 0 233.58 136.53"
    xml:space="preserve"
  >
    <title>Laura</title>
    <defs>
      <g id="laura-signature-mask">
        <mask id="mask-laura-L">
          <path
            id="mask-L"
            class="mask"
            stroke-dasharray="1000"
            stroke-dashoffset="1000"
            d="m58.77.24s-1.19,18.55-8.96,41c-9,26-22,56-41,76-6.5,6.84-4.79-.18-4-2,2.75-6.34,10.55-18.39,32.13-18.39,37.24,0,65.17-39.9,63.87-38.61"
          />
        </mask>
        <mask id="mask-laura-A">
          <path
            id="mask-A"
            class="mask"
            stroke-dasharray="1000"
            stroke-dashoffset="1000"
            d="m114.31,61.76c-2.4,6.01-18.42,18.04-12,6,7.14-13.39,13.4-5.37,13.4-5.37,0,0-12.4,30.37,13.6,8.37"
          />
        </mask>
        <mask id="mask-laura-U">
          <path
            id="mask-U"
            class="mask"
            stroke-dasharray="1000"
            stroke-dashoffset="1000"
            d="m134.31,63.74s-22.2,42.99,11.24,4.42c0,0,2.08-2.4,3.17,8.71,0,0,14.13-6.89,16.36-10.01"
          />
        </mask>
        <mask id="mask-laura-R">
          <path
            id="mask-R"
            class="mask"
            stroke-dasharray="1000"
            stroke-dashoffset="1000"
            d="m163.47,67.77c1.05-.98,2.17-1.03,3.25-2.25,8.59-9.76-4.41-7.76-4.71-1.66,0,0,7.41-.28,9.3,7.9.14.62.05,5.37,0,6-.22,2.8-.98,8.33,6.01,5.53,8.39-3.35,16.36-13.29,19.92-22.58"
          />
          />
        </mask>
        <mask id="mask-laura-AA">
          <path
            id="mask-AA"
            class="mask"
            stroke-dasharray="1000"
            stroke-dashoffset="1000"
            d="m205.83,61.48c-2.6-1.45-10.53-2.72-11.82,10.7,0,0,1.76,4.39,10.14-5.67,0,0,5.15-2.76,2.15-5.76-.44-.44-.44,2.94-.86,6.96-.54,5.2-1.09,11.48,2.86,12.04,5.05.72,18-12,18-17"
          />
        </mask>
      </g>
    </defs>

    <g id="laura-signature">
      <path
        id="L"
        mask="url(#mask-laura-L)"
        class="font"
        d="M20.08,103.61c0.4-0.12,0.77-0.27,1.11-0.45c0.34-0.18,0.57-0.33,0.69-0.45
		c0.56-0.72,1.94-3.16,4.14-7.33c2.2-4.16,4.59-8.85,7.18-14.05c2.58-5.2,4.75-9.73,6.52-13.57c6.57-14.57,11.41-27.29,14.53-38.14
		c1.28-4.56,2.28-8.73,3-12.49c0.72-3.76,0.98-6.19,0.78-7.27c-0.44-1.48-0.51-2.66-0.21-3.54C58.13,5.44,58.84,5,59.96,5
		c1.2,0,1.92,0.86,2.16,2.58c0.24,1.72,0.17,3.88-0.21,6.49c-0.38,2.6-0.9,5.31-1.56,8.11c-0.66,2.8-1.33,5.36-2.01,7.66
		c-0.68,2.3-1.2,3.97-1.56,5.01C53.29,44.66,49.03,54.71,43.99,65c-5.04,10.29-9.47,19-13.27,26.12
		c-3.56,6.57-5.35,10.17-5.35,10.81c0,0.16,0.95,0.12,2.85-0.12c1.9-0.24,4.22-0.6,6.97-1.08c2.74-0.48,5.45-1,8.14-1.56
		c2.68-0.56,4.86-1.08,6.55-1.56c2.16-0.64,4.53-1.42,7.12-2.34c2.58-0.92,4.67-1.74,6.28-2.46c6.57-3.04,12.94-6.73,19.13-11.05
		c6.19-4.32,10.46-8.09,12.82-11.29c0.48-0.72,0.8-1.29,0.96-1.71c0.16-0.42,0.28-1.05,0.36-1.89c0.2-1.84,0.66-3.05,1.38-3.63
		c0.72-0.58,1.45-0.7,2.19-0.36c0.74,0.34,1.28,0.96,1.62,1.86c0.34,0.9,0.21,1.93-0.39,3.09c-1.96,3.2-6.41,7.39-13.33,12.55
		c-6.93,5.16-14.05,9.61-21.38,13.33c-8.73,4.48-20.46,8.23-35.19,11.23c-0.96,0.2-1.98,0.4-3.06,0.6c-0.92,0.2-1.75,0.37-2.49,0.51
		c-0.74,0.14-1.25,0.27-1.53,0.39l-1.5,0.48c-0.4,0.64-0.82,1.32-1.26,2.04c-1.68,2.84-3.53,5.76-5.56,8.74
		c-2.02,2.98-4.04,5.35-6.07,7.09c-2.02,1.74-3.89,2.15-5.62,1.23c-0.44-0.32-0.82-0.79-1.14-1.41c-0.32-0.62-0.5-1.25-0.54-1.89
		c0.04-1.64,0.79-3.63,2.25-5.98c1.46-2.34,3.41-4.71,5.86-7.12C13.94,106.58,17.04,104.57,20.08,103.61z M10.59,118.33
		c0.64-0.64,1.38-1.44,2.22-2.4c0.84-0.96,1.59-1.88,2.25-2.76c0.66-0.88,0.99-1.44,0.99-1.68c0-0.16-0.26-0.01-0.78,0.45
		c-0.52,0.46-1.13,1.07-1.83,1.83c-0.7,0.76-1.39,1.56-2.07,2.4C8.93,119.25,8.67,119.97,10.59,118.33z"
      />
      <path
        id="A"
        mask="url(#mask-laura-A)"
        class="font"
        d="M117.01,84.82c-0.76,0-1.34-0.1-1.74-0.3c-1.68-0.88-2.52-2.58-2.52-5.1c0-1.84,0.4-4.22,1.2-7.15V72.2
		c0-0.04-0.02-0.06-0.06-0.06c-0.08,0-0.86,0.66-2.34,1.98c-3.4,3.04-6.01,4.56-7.81,4.56c-1.04,0-1.8-0.54-2.28-1.62
		c-0.2-0.56-0.3-1.16-0.3-1.8c0-1.72,0.82-3.68,2.46-5.89c3.04-3.48,6.21-5.22,9.49-5.22c2.08,0,3.64,0.78,4.68,2.34
		c0.16,0.24,0.24,0.6,0.24,1.08c0,1.36-0.24,2.34-0.72,2.94c-0.48,0.6-0.92,1.54-1.32,2.82c-0.8,2.6-1.2,4.7-1.2,6.31
		c0,1.08,0.28,1.94,0.84,2.58c0.4,0.48,0.88,0.72,1.44,0.72c1.88,0,5.26-1.92,10.15-5.77c1.8-1.44,3.06-2.63,3.78-3.57
		c0.72-0.94,1.08-1.88,1.08-2.82c0-0.94,0.24-1.59,0.72-1.95c0.48-0.36,0.94-0.54,1.38-0.54c0.76,0,1.3,0.38,1.62,1.14
		c0.16,0.48,0.24,0.94,0.24,1.38c0,1.32-0.4,2.22-1.2,2.7c-0.36,0.16-1.32,0.92-2.88,2.28c-2.48,2.16-4.9,4.05-7.27,5.68
		c-2.36,1.62-4.16,2.61-5.41,2.97C118.58,84.7,117.82,84.82,117.01,84.82z M103.8,76.41c0.88,0,2.5-1.04,4.86-3.12
		c2.04-1.8,3.24-3.1,3.6-3.9c0.12-0.28,0.18-0.68,0.18-1.2c0-0.72-0.36-1.08-1.08-1.08c-0.68,0-1.58,0.36-2.7,1.08
		c-2.28,1.48-3.86,3.24-4.74,5.29c-0.44,1-0.66,1.76-0.66,2.28C103.26,76.19,103.44,76.41,103.8,76.41z"
      />
      <path
        id="U"
        mask="url(#mask-laura-U)"
        class="font"
        d="M130.23,89.92h-0.3c-0.72,0-1.3-0.24-1.74-0.72c-0.64-0.72-0.96-1.78-0.96-3.18l0.06-2.1
		c0.16-2.04,0.84-4.54,2.04-7.51c1.56-3.96,2.74-6.31,3.54-7.03c0.44-0.36,1.06-0.54,1.86-0.54c1.24,0,1.88,0.76,1.92,2.28
		c0,1.04-0.82,2.12-2.46,3.24c-0.44,0.28-0.8,0.58-1.08,0.9c-0.88,1-1.64,2.7-2.28,5.1c-0.48,1.88-0.72,3.62-0.72,5.22
		c0,1.04,0.2,1.56,0.6,1.56c0.8,0,3.84-2.64,9.13-7.93c1.88-1.84,3.36-3.26,4.44-4.26c1.08-1,1.9-1.68,2.46-2.04
		c0.56-0.36,1.02-0.54,1.38-0.54c0.64,0,1.11,0.27,1.41,0.81c0.3,0.54,0.51,1.49,0.63,2.85c0.08,1.16,0.22,2.01,0.42,2.55
		c0.2,0.54,0.7,0.81,1.5,0.81c1.12,0,2.65-0.49,4.59-1.47c1.94-0.98,3.81-2.33,5.62-4.05c0.88-0.88,1.32-1.54,1.32-1.98
		c0-0.76,0.28-1.46,0.84-2.1c0.56-0.64,1.18-0.96,1.86-0.96c0.56,0,1.09,0.14,1.59,0.42c0.5,0.28,0.75,0.68,0.75,1.2
		c0,1.16-0.83,2.44-2.49,3.84c-1.66,1.4-3.55,2.69-5.68,3.87c-2.12,1.18-3.68,1.97-4.68,2.37c-1.76,0.72-3.28,1.08-4.56,1.08
		c-1.28,0-2.22-0.54-2.82-1.62c-0.52-0.84-0.78-1.84-0.78-3c0-0.96-0.16-1.48-0.48-1.56c-0.16,0-2.4,2.12-6.73,6.37
		c-2.24,2.2-3.98,3.88-5.22,5.04C133.05,88.82,131.39,89.84,130.23,89.92z"
      />
      <path
        id="R"
        mask="url(#mask-laura-R)"
        class="font"
        d="M176.23,89.92c-1.64,0-2.88-0.56-3.72-1.68c-0.68-0.92-1.02-2.72-1.02-5.41l0.06-2.7
		c0-2.52-0.27-4.3-0.81-5.35c-0.54-1.04-1.89-1.84-4.05-2.4c-2.32-0.68-3.48-1.94-3.48-3.78c0-0.64,0.12-1.34,0.36-2.1
		c0.48-1.48,1.24-2.62,2.28-3.42c0.76-0.56,1.52-0.84,2.28-0.84c0.32,0,0.62,0.04,0.9,0.12c1.6,0.56,2.4,1.82,2.4,3.78
		c0,0.88-0.12,1.68-0.36,2.4c-0.28,1.2-0.42,1.98-0.42,2.34c0,0.52,0.28,0.92,0.84,1.2c1,0.88,1.62,1.86,1.86,2.94
		c0.12,0.64,0.22,2.52,0.3,5.65c0.08,3.56,0.26,5.59,0.54,6.07c0.32,0.64,0.96,0.96,1.92,0.96c1.44,0,3.3-0.86,5.59-2.58
		c3.4-2.6,6.33-5.44,8.77-8.5c2.44-3.06,3.82-5.62,4.14-7.66c0.08-0.6,0.28-1.24,0.6-1.92c0.52-1.2,1.22-1.8,2.1-1.8
		c0.28,0,0.58,0.08,0.9,0.24c0.8,0.52,1.2,1.28,1.2,2.28c0,0.12-0.02,0.49-0.06,1.11c-0.04,0.62-0.54,1.33-1.5,2.13
		c-0.44,0.28-1.1,1.06-1.98,2.34c-3.12,4.68-6.83,8.73-11.11,12.13C181.08,88.44,178.23,89.92,176.23,89.92z M165.96,69.08
		c0.4,0,0.9-0.52,1.5-1.56c0.36-0.8,0.54-1.42,0.54-1.86c0-0.32-0.08-0.48-0.24-0.48c-0.28,0-0.6,0.24-0.96,0.72
		s-0.63,0.97-0.81,1.47c-0.18,0.5-0.27,0.91-0.27,1.23C165.72,68.92,165.8,69.08,165.96,69.08z"
      />
      <path
        id="AA"
        mask="url(#mask-laura-AA)"
        class="font"
        d="M208.96,84.82c-0.76,0-1.34-0.1-1.74-0.3
		c-1.68-0.88-2.52-2.58-2.52-5.1c0-1.84,0.4-4.22,1.2-7.15V72.2c0-0.04-0.02-0.06-0.06-0.06c-0.08,0-0.86,0.66-2.34,1.98
		c-3.4,3.04-6.01,4.56-7.81,4.56c-1.04,0-1.8-0.54-2.28-1.62c-0.2-0.56-0.3-1.16-0.3-1.8c0-1.72,0.82-3.68,2.46-5.89
		c3.04-3.48,6.21-5.22,9.49-5.22c2.08,0,3.64,0.78,4.68,2.34c0.16,0.24,0.24,0.6,0.24,1.08c0,1.36-0.24,2.34-0.72,2.94
		c-0.48,0.6-0.92,1.54-1.32,2.82c-0.8,2.6-1.2,4.7-1.2,6.31c0,1.08,0.28,1.94,0.84,2.58c0.4,0.48,0.88,0.72,1.44,0.72
		c1.88,0,5.26-1.92,10.15-5.77c1.8-1.44,3.06-2.63,3.78-3.57c0.72-0.94,1.08-1.88,1.08-2.82c0-0.94,0.24-1.59,0.72-1.95
		c0.48-0.36,0.94-0.54,1.38-0.54c0.76,0,1.3,0.38,1.62,1.14c0.16,0.48,0.24,0.94,0.24,1.38c0,1.32-0.4,2.22-1.2,2.7
		c-0.36,0.16-1.32,0.92-2.88,2.28c-2.48,2.16-4.9,4.05-7.27,5.68c-2.36,1.62-4.16,2.61-5.41,2.97
		C210.52,84.7,209.76,84.82,208.96,84.82z M195.75,76.41c0.88,0,2.5-1.04,4.86-3.12c2.04-1.8,3.24-3.1,3.6-3.9
		c0.12-0.28,0.18-0.68,0.18-1.2c0-0.72-0.36-1.08-1.08-1.08c-0.68,0-1.58,0.36-2.7,1.08c-2.28,1.48-3.86,3.24-4.74,5.29
		c-0.44,1-0.66,1.76-0.66,2.28C195.21,76.19,195.39,76.41,195.75,76.41z"
      />
    </g>
  </svg>
</template>

<style scoped>
.font {
	@apply tw-fill-indigo-800 dark:tw-fill-indigo-200;
	stroke: none;
}

.mask {
	fill: none;
	stroke-width: 12px;
}

@keyframes strokeOffset {
	to {
		stroke-dashoffset: 0;
	}
}

@keyframes strokeOffset1 {
	to {
		stroke-dashoffset: 0;
	}
}

#mask-L {
	animation: strokeOffset .4s linear forwards 0.5s;
}
#mask-A {
	animation: strokeOffset .4s linear forwards 1s;
}
#mask-U {
	animation: strokeOffset .4s linear forwards 1.4s;
}
#mask-R {
	animation: strokeOffset .4s linear forwards 1.8s;
}
#mask-AA {
	animation: strokeOffset .4s linear forwards 2.2s;
}
</style>
